<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='80' font-size='80'>üêç</text></svg>">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <a href="index.html" class="home-btn" title="Back to Home">
            <span class="material-symbols-outlined">home</span>
        </a>
        <button id="fullscreenBtn" class="fullscreen-btn" title="Fullscreen">‚õ∂</button>
        <span class="version-number" id="versionNumber" title="View Changelog">v5.5.0</span>
        <button id="settingsBtn" class="settings-btn" title="Settings">
            <span class="material-symbols-outlined">settings</span>
        </button>

        <!-- Changelog Modal -->
        <div id="changelogModal" class="modal hidden">
            <div class="modal-content changelog-content">
                <span class="close-btn" id="closeChangelog">&times;</span>
                <h2>Version History</h2>
                <div class="changelog-list">
                    <div class="changelog-item">
                        <h3>v5.5.0</h3>
                        <ul>
                            <li>Added joystick control option for mobile and tablet modes</li>
                            <li>Added swipe-to-turn functionality for touch devices</li>
                            <li>Added "Touch Control Type" setting with three options: D-Pad, Joystick, and Swipe</li>
                            <li>Control type preference persists via localStorage</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.3.4</h3>
                        <ul>
                            <li>Fixed critical bug where pressing LEFT as first move caused instant death</li>
                            <li>Snake now properly recognizes its implicit starting direction (RIGHT)</li>
                            <li>Opposite direction blocking now works correctly for first input</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.3.3</h3>
                        <ul>
                            <li>Improved Hell Mode visuals with left-to-right fill animation</li>
                            <li>Added automatic progress decay (resets after 2 seconds of inactivity)</li>
                            <li>Progress resets when closing settings modal</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.3.2</h3>
                        <ul>
                            <li>Fixed bug where pressing opposite direction during gameplay caused instant death</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.3.1</h3>
                        <ul>
                            <li>Improved ???</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.3.0</h3>
                        <ul>
                            <li>Added ???</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.2.0</h3>
                        <ul>
                            <li>Added optional mobile slowdown toggle in settings (mobile/tablet modes only)</li>
                            <li>Slowdown is enabled by default but can be disabled to play at full speed</li>
                            <li>Setting persists across sessions via localStorage</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.1.1</h3>
                        <ul>
                            <li>High score display now turns gray when player is no longer eligible to save high scores</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.1.0</h3>
                        <ul>
                            <li>Disabling wall collision now prevents high score tracking for that round</li>
                            <li>Re-enabling wall collision mid-round does not restore high score eligibility</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.0.1</h3>
                        <ul>
                            <li>Fixed Mystery mode: food now spawns randomly within zone instead of always at center</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v5.0.0</h3>
                        <ul>
                            <li>Added Mystery game mode with zone-based food location</li>
                            <li>Added game mode selector on start screen (Classic/Mystery)</li>
                            <li>Mystery mode shows 3x3 zone instead of exact food position</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v4.5.2</h3>
                        <ul>
                            <li>Fixed changelog modal overflow bug</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v4.5.1</h3>
                        <ul>
                            <li>Updated version format to include PATCH number</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v4.5.0</h3>
                        <ul>
                            <li>Added clickable version history modal</li>
                            <li>Improved changelog styling for dark and light modes</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v4.4</h3>
                        <ul>
                            <li>Added browser tab icons for homepage and game</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v4.3</h3>
                        <ul>
                            <li>Custom mode now features multi-color gradient combining all difficulty colors</li>
                            <li>Rebranded to OciGames</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v4.2</h3>
                        <ul>
                            <li>Added home button to return to homepage</li>
                            <li>Replaced emoji icons with Material Icons</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v4.1</h3>
                        <ul>
                            <li>Created homepage portal with game tiles</li>
                            <li>Snake game moved to dedicated page</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v4.0</h3>
                        <ul>
                            <li>Added Custom game mode with adjustable map size (10-30 tiles)</li>
                            <li>Added adjustable speed slider (20-200ms)</li>
                            <li>Custom mode has separate high score tracking</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v3.2</h3>
                        <ul>
                            <li>Snake now waits for first player input before moving</li>
                            <li>Works with both keyboard and mobile controls</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v3.1</h3>
                        <ul>
                            <li>High score labels now show difficulty name</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v3.0</h3>
                        <ul>
                            <li>Increased tile size to 40px for better visibility</li>
                            <li>Each difficulty now tracks its own high score</li>
                            <li>Added EXTREME difficulty mode (25√ó25 tiles, lightning fast)</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v2.1</h3>
                        <ul>
                            <li>Added icons to control mode buttons</li>
                            <li>Improved mobile D-pad touch response</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v2.0</h3>
                        <ul>
                            <li>Added Tablet mode with D-pad on the side</li>
                            <li>Added fullscreen toggle button</li>
                            <li>Automatic device type detection</li>
                            <li>Mobile and tablet modes are 40% slower for easier control</li>
                        </ul>
                    </div>
                    <div class="changelog-item">
                        <h3>v1.0</h3>
                        <ul>
                            <li>Initial release with classic Snake gameplay</li>
                            <li>Three difficulty levels (Easy, Medium, Hard)</li>
                            <li>Dark and Light theme options</li>
                            <li>Mobile mode with touch controls</li>
                            <li>Settings modal with customization options</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="startScreen" class="start-screen">
            <h1 class="start-title">Snake Game</h1>
            <div class="gamemode-selector">
                <button id="classicModeBtn" class="gamemode-btn active">Classic</button>
                <button id="mysteryModeBtn" class="gamemode-btn">Mystery</button>
            </div>
            <p id="gamemodeDescription" class="gamemode-description">Classic Snake - Eat the food and grow!</p>
            <div class="difficulty-buttons">
                <button class="difficulty-btn easy-btn" data-difficulty="easy">
                    <span class="difficulty-name">Easy</span>
                    <span class="difficulty-desc">10x10 Tiles ‚Ä¢ Slow Speed</span>
                </button>
                <button class="difficulty-btn medium-btn" data-difficulty="medium">
                    <span class="difficulty-name">Medium</span>
                    <span class="difficulty-desc">15x15 Tiles ‚Ä¢ Normal Speed</span>
                </button>
                <button class="difficulty-btn hard-btn" data-difficulty="hard">
                    <span class="difficulty-name">Hard</span>
                    <span class="difficulty-desc">20x20 Tiles ‚Ä¢ Fast Speed</span>
                </button>
                <button class="difficulty-btn extreme-btn" data-difficulty="extreme">
                    <span class="difficulty-name">EXTREME</span>
                    <span class="difficulty-desc">25x25 Tiles ‚Ä¢ Lightning Fast</span>
                </button>
                <button class="difficulty-btn custom-btn" data-difficulty="custom">
                    <span class="difficulty-name">Custom</span>
                    <span class="difficulty-desc">Customize Size & Speed</span>
                </button>
            </div>
        </div>

        <!-- Custom Settings Screen -->
        <div id="customScreen" class="custom-screen hidden">
            <h1 class="custom-title">Custom Game</h1>
            <p class="custom-subtitle">Customize Your Experience</p>
            <div class="custom-controls">
                <div class="custom-control-group">
                    <label for="customSize">Map Size: <span id="customSizeValue">15</span>x<span id="customSizeValue2">15</span></label>
                    <input type="range" id="customSize" min="10" max="30" value="15" step="1">
                    <span class="custom-hint">10-30 tiles</span>
                </div>
                <div class="custom-control-group">
                    <label for="customSpeed">Speed: <span id="customSpeedValue">100</span>ms</label>
                    <input type="range" id="customSpeed" min="20" max="200" value="100" step="10">
                    <span class="custom-hint">20ms (fastest) - 200ms (slowest)</span>
                </div>
                <div class="custom-buttons">
                    <button id="startCustomBtn" class="btn-primary">Start Game</button>
                    <button id="backToMenuBtn" class="btn-secondary">Back</button>
                </div>
            </div>
        </div>

        <div class="game-header">
            <h1>Snake Game</h1>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-label">Score:</span>
                    <span id="score" class="stat-value">0</span>
                </div>
                <div id="highScoreContainer" class="stat-item">
                    <span id="highScoreLabel" class="stat-label">High Score:</span>
                    <span id="highScore" class="stat-value">0</span>
                </div>
            </div>
        </div>

        <div class="controls-panel">
            <div class="control-group">
                <label>
                    <input type="checkbox" id="wallMode" checked>
                    Wall Collision (Game Over)
                </label>
            </div>
            <button id="pauseBtn" class="btn">Pause</button>
            <button id="restartBtn" class="btn">Restart</button>
        </div>

        <div class="game-content">
            <div class="game-wrapper">
                <canvas id="gameCanvas" width="500" height="500"></canvas>
                <div id="gameOverlay" class="overlay hidden">
                    <div class="overlay-content">
                        <h2 id="overlayTitle">Game Paused</h2>
                        <p id="overlayMessage">Press Space or click Resume to continue</p>
                        <div class="overlay-buttons">
                            <button id="resumeBtn" class="btn btn-large">Resume</button>
                            <button id="homeBtn" class="btn btn-large btn-secondary">Home</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="instructions">
                <h3>Controls</h3>
                <p>Use <strong>Arrow Keys</strong> or <strong>WASD</strong> to move</p>
                <p>Press <strong>Space</strong> to pause/resume</p>
                <p>Press <strong>R</strong> to restart</p>
            </div>

            <!-- Mobile Touch Controls -->
            <div id="mobileControls" class="mobile-controls hidden">
                <!-- D-pad controls -->
                <div class="dpad-container">
                    <button class="dpad-btn dpad-up" data-direction="up">‚ñ≤</button>
                    <div class="dpad-middle">
                        <button class="dpad-btn dpad-left" data-direction="left">‚óÄ</button>
                        <div class="dpad-center"></div>
                        <button class="dpad-btn dpad-right" data-direction="right">‚ñ∂</button>
                    </div>
                    <button class="dpad-btn dpad-down" data-direction="down">‚ñº</button>
                </div>

                <!-- Joystick controls -->
                <div class="joystick-container hidden">
                    <div class="joystick-base">
                        <div class="joystick-stick"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button id="closeSettings" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label for="themeToggle">Theme:</label>
                    <div class="toggle-group">
                        <button id="darkModeBtn" class="toggle-btn active">Dark</button>
                        <button id="lightModeBtn" class="toggle-btn">Light</button>
                    </div>
                </div>
                <div class="setting-item">
                    <label for="controlModeToggle">Control Mode:</label>
                    <div class="toggle-group">
                        <button id="pcModeBtn" class="toggle-btn active">üñ•Ô∏è PC</button>
                        <button id="mobileModeBtn" class="toggle-btn">üì± Mobile</button>
                        <button id="tabletModeBtn" class="toggle-btn">üì≤ Tablet</button>
                    </div>
                </div>
                <div class="setting-item mobile-tablet-only hidden" id="mobileControlTypeSetting">
                    <label for="mobileControlTypeToggle">Touch Control Type:</label>
                    <div class="toggle-group">
                        <button id="dpadControlBtn" class="toggle-btn active">D-Pad</button>
                        <button id="joystickControlBtn" class="toggle-btn">Joystick</button>
                        <button id="swipeControlBtn" class="toggle-btn">Swipe</button>
                    </div>
                </div>
                <div class="setting-item mobile-tablet-only hidden" id="mobileSlowdownSetting">
                    <label>
                        <input type="checkbox" id="mobileSlowdownCheckbox" checked>
                        Enable Mobile Slowdown (40% slower for easier control)
                    </label>
                </div>
                <div class="setting-item">
                    <button id="eraseHighscoreBtn" class="btn btn-danger">Erase High Score</button>
                </div>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
